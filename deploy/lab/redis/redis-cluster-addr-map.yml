---
apiVersion: v1
kind: ConfigMap
metadata:
  name: redis-cluster-addr-map
  namespace: redis
data:
  script: |
    # Capture the addresses of all known cluster members immediately before 
    # shutdown.
    source "$REDIS_SCRIPT_DIR/cluster-common.sh"

    cluster_members=()
    list_cluster_members cluster_members $REDIS_NODE_COUNT

    write_address_map cluster_members "address_map.txt"
